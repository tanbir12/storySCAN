
<%- include('header', { title: 'Dashboard | Admin' }) %>


  <!-- [ Main Content ] start -->
  <div class="pc-container">
    <div class="pc-content">
      <!-- [ breadcrumb ] start -->
      <div class="page-header">
        <div class="page-block">
          <div class="row align-items-center">
            <div class="col-md-12">
              <div class="page-header-title">
                <h5 class="m-b-10">Home</h5>
              </div>
              <ul class="breadcrumb">
                <li class="breadcrumb-item"><a href="">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript: void(0)">Dashboard</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- [ breadcrumb ] end -->
      <!-- [ Main Content ] start -->
      
      <div class="row">
        <!-- [ sample-page ] start -->
        <div class="col-sm-12">
          <div class="card">
            <div class="card-header">
              <h5>This Request Are sent by users...</h5>
            </div>
          </div>
          
          <div class="row">


            <h2>Pending Admin Requests</h2>

            <% if (requests.length === 0) { %>
              <p>No pending requests</p>
            <% } else { %>
              <div class="table-responsive">
              <table class="table table-striped table-bordered">
                  <thead>
                    <tr>
                      <th>User Name</th>
                      <th>Email</th>
                      <th>Reason</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% requests.forEach(request => { %>
                      <tr>
                        <td data-label="User Name"><%= request.name %></td>
                        <td data-label="Email"><%= request.email %></td>
                        <td data-label="Reason"><%= request.reason %></td>
                        <td data-label="Actions">

                          <% if (request.status == 'approved' ) { %>
                            <button class="btn  btn-sm me-2">Approved</button>
                          <% } else { %>
                              <form action="/admin-requests/<%= request.id %>/<%= request.name %>/<%= request.email %>/approve" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-success btn-sm me-2">Approve</button>
                              </form>
                          <% } %>

                          <form action="/admin-requests/<%= request.id %>/<%= request.name %>/<%= request.email %>/reject" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-danger btn-sm">Remove</button>
                          </form>
                        </td>
                      </tr>
                    <% }); %>
                  </tbody>
                </table>
              </div>
            <% } %>
            
            
            
          </div>
        </div>
        <!-- [ sample-page ] end -->
      </div>



    </div>
  </div>
  <!-- [ Main Content ] end -->
  <footer class="pc-footer">
    <div class="footer-wrapper container-fluid">
      <div class="row">
        <div class="col-sm my-1">
          <p class="m-0"> &#9829; Design & Developed by <a href="https://www.byteknot.in/"
              target="_blank">Byteknot Technology</a>.</p>
        </div>
        <div class="col-auto my-1">
          <ul class="list-inline footer-link mb-0">
            <li class="list-inline-item"><a href="index.html">Home</a></li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- [Page Specific JS] start -->
              <style>
                /* Responsive table to card on mobile */
                @media only screen and (max-width: 768px) {
                  .table-responsive {
                    overflow-x: hidden;
                    padding: 0;
                  }
                  table.table {
                    border: 0;
                    width: 100%;
                  }
                  table.table thead {
                    display: none;
                  }
                  table.table tbody tr {
                    display: block;
                    margin-bottom: 1rem;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    padding: 1rem;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                  }
                  table.table tbody tr td {
                    display: block;
                    text-align: right;
                    font-size: 0.9rem;
                    border-bottom: 1px solid #eee;
                    position: relative;
                    padding-left: 50%;
                  }
                  table.table tbody tr td:last-child {
                    border-bottom: 0;
                  }
                  table.table tbody tr td::before {
                    content: attr(data-label);
                    position: absolute;
                    left: 1rem;
                    top: 50%;
                    transform: translateY(-50%);
                    font-weight: 600;
                    text-transform: uppercase;
                    font-size: 0.75rem;
                    color: #555;
                    text-align: left;
                    width: 45%;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                  }
                }
                /* Fix for very small screens */
                @media only screen and (max-width: 375px) {
                  table.table tbody tr td[data-label="Actions"] form {
                    display: block !important;
                    margin-bottom: 0.5rem;
                  }
                  table.table tbody tr td[data-label="Email"] {
                    white-space: normal !important;
                    word-break: break-word !important;
                    overflow-wrap: break-word !important;
                    max-width: 100% !important;
                    text-align: right !important;
                    padding-left: 1rem !important;
                  }
                }
              </style>
<%- include('footer') %>
